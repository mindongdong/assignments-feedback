# 스터디 과제 관리 봇 & 관리자 웹 **통합 기획서**

## 1. 프로젝트 개요

### 1.1 목적(목표)

- 웹 스터디의 **공지–제출–피드백–현황 관리** 전 과정을 자동화
- **AI 기반 맞춤 피드백**으로 학습 효과 극대화
- **스터디장 운영 부담 경감**, 스터디원에게는 체계적이고 즉각적인 피드백 제공

### 1.2 핵심 솔루션/구성

- **디스코드 봇**: 스터디원이 사용하는 제출/조회 인터페이스
- **관리자 웹 페이지**: 공지 관리, 제출 현황 모니터링, 수동 피드백
- **AI 평가 시스템**: 과제 정보+제출물을 입력받아 자동 피드백(Claude/OpenAI 등 LLM)
- **데이터베이스**: 제출물·피드백·사용자/과제 메타데이터 저장

---

## 2. 과제 고유번호 시스템

### 2.1 고유번호 생성

- 관리자가 과제 등록 시 **6자리 고유번호 자동 생성** (예: `A1B2C3`, `X9Y8Z7`)
- **형식**: 영문 대문자 + 숫자 조합 (가독성 향상)
- **중복 방지**: 생성 시 DB 체크로 유니크 보장
- 관리자 페이지에서 과제 목록에 고유번호 표시

### 2.2 고유번호 활용

- 모든 과제 관련 명령어에서 **과제 고유번호**를 기본 식별자로 사용
- 스터디원은 공지된 고유번호로 해당 과제를 정확히 지정하여 제출/조회

---

## 3. 디스코드 봇 기능 (수정)

### 3.1 공지 확인

- 명령어: `!공지 {과제고유번호}`
- 예시: `!공지 A1B2C3`
- **ephemeral(나만 보기)** 메시지로 해당 과제 공지(마크다운) 표시
- 표시 내용: 과제명, 요구사항/권장사항, 마감일, 내 제출 상태 등

### 3.2 과제 제출

#### A) 글 제출

**대화형 UI (권장)**

- 명령어: `!제출`
- 과제 고유번호 입력 → 제출 타입 선택(글/코드) → 내용 입력

**직접 명령어**

- 명령어: `!제출글 {과제고유번호} "{제목}" {링크}`
- 예시: `!제출글 A1B2C3 "React Hooks 정리" https://myblog.tistory.com/123`

**제출 프로세스**

- (권장) **링크 제출 + 본문 수집**
    - **Notion**: 웹 스크래핑 대신 **Notion API 연동을 권장**(안정·정확)
    - **Tistory/Velog/GitHub Pages**: 일반적 구조는 **크롤링 가능**
- 제출 시 제목/URL 입력 → 본문을 가져와 DB 저장
- 실패 시 **본문 직접 붙여넣기** 옵션 제공

#### B) 코드 제출

**대화형 UI (권장)**

- 명령어: `!제출`
- 과제 고유번호 입력 → 제출 타입 선택(글/코드) → GitHub 링크 또는 파일 첨부

**직접 명령어**

- 명령어: `!제출코드 {과제고유번호} {GitHub레포링크}`
- 예시: `!제출코드 A1B2C3 https://github.com/username/react-todo-app`

**제출 옵션**

- (권장) **GitHub Repository 링크 제출**
    - 레포를 clone하여 **폴더 구조·전역 맥락** 기반 피드백
- (대안) **파일 첨부 제출** 지원
    - Discord 기본: **메시지당 최대 10개 파일**, **파일당 8MB**
    - 지원 확장자: `.py, .js, .jsx, .ts, .tsx, .html, .css` 등

### 3.3 피드백 재확인

- 명령어: `!피드백 {제출번호}`
- 제출 당시의 **AI 피드백**을 재전송
- 제출번호는 과제 제출 시 자동 생성되는 고유 ID

### 3.4 현황/내 제출 조회

- **특정 과제 제출 확인**: `!내제출 {과제고유번호}`
    - 예시: `!내제출 A1B2C3`
    - 해당 과제에 대한 내 제출 상태, 점수, 피드백 확인
- **전체 현황**: `!현황`
    1. **나의 전체 제출 현황**(과제별 제출 상태 목록)
    2. **진행 중인 과제 목록**(고유번호 포함)
    3. **전체 제출 통계**

### 3.5 과제 목록 조회

- **명령어**: `!과제리스트`
- **기능**: 현재 등록된 모든 과제를 최신 순으로 정렬하여 표시
- **표시 정보**:
    - 과제 고유번호
    - 과제 제목
    - 마감일
    - 제출 상태 (제출/미제출)
- **예시 출력**:
    
    ```
    📋 과제 목록 (최신순)1. [A1B2C3] React Hooks 실습   마감: 2025-08-10 23:59 | 상태: ✅ 제출완료2. [X9Y8Z7] JavaScript 비동기 처리   마감: 2025-08-07 23:59 | 상태: ❌ 미제출3. [M5N6P7] CSS Grid 레이아웃   마감: 2025-08-03 23:59 | 상태: ✅ 제출완료
    ```
    

---

## 4. 관리자 웹 페이지 기능 (수정)

### 4.1 대시보드

- 진행 중인 과제 목록 (고유번호 표시)
- 과제별 제출률 통계
- 최근 제출 목록

### 4.2 과제 공지 관리

- **과제 등록 시 6자리 고유번호 자동 생성**
    - 생성 규칙: 영문 대문자(A-Z) + 숫자(0-9) 랜덤 조합
    - 예: `A1B2C3`, `X9Y8Z7`
- **과제 정보 입력**
    - 과제명, 설명, 요구사항, 권장사항, 마감일, 참고링크
    - 마크다운 에디터 지원
- **고유번호 표시**
    - 생성된 고유번호를 크게 표시
    - 복사 버튼 제공 (디스코드 공지용)
- **예약 발행**: 지정 시간에 공지 자동 게시

### 4.3 제출 현황 관리

- **과제별 필터링**: 고유번호로 특정 과제 제출물만 조회
- 사용자별 제출 상태 (미제출/제출/지각)
- 제출 글/코드/AI 피드백 열람
- 관리자 수동 피드백 추가/수정
- 과제별 제출물 일괄 다운로드

### 4.4 사용자 관리

- 디스코드 계정 연동
- 스터디원 추가/삭제
- 개인별 과제 제출 이력 (고유번호 기준)

### 4.5 AI 평가 설정

- **과제별 평가 기준 설정** (고유번호 단위)
- 과제 특성에 맞는 맞춤 프롬프트
- 엄격도 조절

---

## 5. AI 평가 시스템 (수정)

### 5.1 프로세스

1. **과제 고유번호로 요구사항 조회**
2. 제출물(글/코드) 분석
3. 과제별 맞춤 평가 기준 적용
4. **구체적 피드백** 생성
5. 개선 제안 및 총평 포함

### 5.2 프롬프트 설계 (수정)

```
당신은 친절하고 전문적인 프로그래밍 튜터입니다. 

[과제 정보]
- 과제 고유번호: {assignment_id}
- 과제명: {assignment_title}
- 제출 기한: {deadline}
- 과제 요구사항:
{assignment_requirements}
- 과제 권장사항:
{assignment_recommendations}

[사용자 제출물]
{user_submission_content}

[피드백 생성 가이드]
1. 요구사항 충족 여부: 항목별 체크
2. 좋았던 점: 구체적으로
3. 개선할 점: 예시 코드 포함
4. 총평: 격려와 다음 학습 방향

마크다운 형식으로 작성해주세요.
```

---

## 6. 데이터베이스 스키마 (주요 변경사항)

### 과제(Assignments) 테이블

```sql
- id: UUID
- assignment_code: VARCHAR(6) UNIQUE -- 6자리 고유번호
- title: VARCHAR(255)
- description: TEXT
- requirements: TEXT
- recommendations: TEXT
- deadline: TIMESTAMP
- created_at: TIMESTAMP
```

### 제출물(Submissions) 테이블

```sql
- id: UUID
- assignment_code: VARCHAR(6) -- FK to Assignments
- user_id: VARCHAR(255)
- submission_type: ENUM('blog', 'code')
- content: TEXT
- url: VARCHAR(500)
- ai_feedback: TEXT
- score: JSON
- submitted_at: TIMESTAMP
```

---

## 7. 운영 프로세스 예시

1. **관리자가 새 과제 등록**
    
    - 과제 정보 입력 → 고유번호 `A1B2C3` 자동 생성
2. **디스코드에 과제 공지**
    
    - "이번 주 과제가 등록되었습니다! 고유번호: `A1B2C3`"
    - "자세한 내용은 `!공지 A1B2C3` 명령어로 확인하세요"
3. **스터디원 과제 목록 확인**
    
    - `!과제리스트` 입력 → 전체 과제 목록과 제출 상태 확인
    - 원하는 과제의 고유번호 확인
4. **스터디원 과제 상세 확인**
    
    - `!공지 A1B2C3` 입력 → 과제 상세 내용 확인
5. **과제 제출**
    
    - 글: `!제출글 A1B2C3 "제목" https://링크`
    - 코드: `!제출코드 A1B2C3 https://github.com/...`
6. **제출 확인**
    
    - `!내제출 A1B2C3` → 해당 과제 제출 상태 확인

---

## 8. 명령어 요약 (최종)

- `!공지 {과제고유번호}`: 특정 과제 공지 확인
- `!제출`: 대화형 제출 시작
- `!제출글 {과제고유번호} "{제목}" {링크}`: 글 과제 직접 제출
- `!제출코드 {과제고유번호} {GitHub링크}`: 코드 과제 직접 제출
- `!피드백 {제출번호}`: AI 피드백 재확인
- `!내제출 {과제고유번호}`: 특정 과제 제출 상태 확인
- `!현황`: 전체 제출 현황 및 진행 중인 과제 목록
- `!과제리스트`: 등록된 모든 과제 목록 조회 (최신순)

---

## 9. 기대 효과

- **명확한 과제 식별**: 6자리 고유번호로 혼동 없는 과제 관리
- **직관적인 사용**: 짧고 기억하기 쉬운 번호 체계
- **확장성**: 다수의 과제가 동시 진행되어도 체계적 관리 가능
- **추적성**: 과제별 제출률, 완성도 등 상세 분석 용이